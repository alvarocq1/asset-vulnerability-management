<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asset Vulnerability Management</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        function updateTime() {
            var now = new Date();
            var formattedTime = now.getFullYear() + '-' + 
                                ('0' + (now.getMonth() + 1)).slice(-2) + '-' + 
                                ('0' + now.getDate()).slice(-2) + ' ' + 
                                ('0' + now.getHours()).slice(-2) + ':' + 
                                ('0' + now.getMinutes()).slice(-2) + ':' + 
                                ('0' + now.getSeconds()).slice(-2);
            document.getElementById('currentTime').textContent = formattedTime;
        }

        setInterval(updateTime, 1000); // Actualiza la hora cada segundo
        window.onload = updateTime; // Actualiza la hora al cargar la página
    </script>
</head>
<body>
    <div class="container">
        <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="logo">
        <h1>Asset Vulnerability Management</h1>
        <p><strong>Último escaneo:</strong> {{ last_scan if last_scan else 'No se ha realizado ningún escaneo aún' }}</p>
        <p><strong>Hora actual:</strong> <span id="currentTime"></span></p>
        <form action="{{ url_for('run_pipeline') }}" method="post">
            <button type="submit">Iniciar Pipeline</button>
        </form>
        <br>
        <form action="{{ url_for('show_cves') }}" method="get">
            <button type="submit">Mostrar CVEs de Scan Results</button>
        </form>
        <br>
        <form action="{{ url_for('show_assets') }}" method="get">
            <button type="submit">Mostrar Activos</button>
        </form>
    </div>
</body>
</html>
